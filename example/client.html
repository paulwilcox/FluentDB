<script type='module'>

    import sample from "../dist/sampleData.client.js";
    import sampleIdb from "../dist/sampleData.idb.js";
    import $$ from "../dist/FluentDB.client.next.js";

    let result = $$({
        sam: $$.idb('sampleData'),
        c: sample.customers,
        pc: sam => 'potentialCustomers', // new Promise(res => res(sample.potentialCustomers)),
        s: sam => 'shoplifters', // new Promise(res => res(sample.shoplifters)),
        o: sample.orders,
        p: sample.products
    })
    .merge('upsert', c => c.id, pc => pc.id)
    .merge('delete', x => x.id, s => s.id)
    //.join((o,p) => o.product == p.id)
    //.join((o,c) => o.customer == c.id)
    .catch(err => 'caught')
    .test(c => c.id > 0); 

    console.log(result);


/*
    fetch('getMongo')
    .then(response => response.json())
    .then(json => console.log(JSON.stringify(json)))
    .catch(e => console.log({e}));
*/

</script>

