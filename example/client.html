<div id='printDiv'></div>

<script type='module'>

    import $$ from '../dist/FluentDB.client.js';
    import sample from '../node_modules/sampledb/dist/sampledb.client.js'; 
    import sampleIdb from '../node_modules/sampledb/dist/sampledb.idb.js';

    sampleIdb("SampleDB", true).then(() => {

        let result = $$({
            o: sample.orders,
            p: sample.products,
            c: $$.idb('customers', 'SampleDB'),
            d: $$.idb('customers', 'SampleDB')
        })
        .import(c => c)
        //.merge((c,o) => c.id == o.customer, 'both left')
        .merge((d,o) => d.id == o.customer, (d,o) => Object.assign({}, d, o))
        .import(d => d)
        .execute();

        console.log(result);

    });

/*
    fetch('getMongo')
    .then(response => response.json())
    .then(json => console.log(JSON.stringify(json)))
    .catch(e => console.log({e}));
*/

</script>

