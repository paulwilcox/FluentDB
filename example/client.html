<div id='printDiv'></div>

<script type='module'>

    import $$ from '../dist/FluentDB.client.js';
    import sample from '../node_modules/sampledb/dist/sampledb.client.js'; 
    import sampleIdb from '../node_modules/sampledb/dist/sampledb.idb.js';

    sampleIdb("SampleDB", true, true).then((idb) => {

        let result = $$({
            o: sample.orders,
            p: sample.products,
            c: $$.idb('customers', 'SampleDB'),
        })
        //.merge((c,o) => c.id == o.customer, 'both left')
        .print(c => c, 'before')
        .merge(
            (c,o) => c.id == o.customer, 
            (c,o) => Object.assign({}, c, o)
        )
        .print(c => c, 'after')
        .execute();

        console.log(idb);
        console.log(result);

    });

/*
    fetch('getMongo')
    .then(response => response.json())
    .then(json => console.log(JSON.stringify(json)))
    .catch(e => console.log({e}));
*/

</script>

