<script type='module'>

    import sample from "../dist/sampleData.client.js";
    import sampleIdb from "../dist/sampleData.idb.js";
    import $$ from "../dist/FluentDB.client.next.js";

    let result = $$({
        sam: $$.idb('sampleData'),
        o: sam => 'orders',
        c: sam => 'customers',
        pc: sample.potentialCustomers, // new Promise(res => res(sample.potentialCustomers)),
        s: sample.shoplifters // new Promise(res => res(sample.shoplifters)),
    })
    .filter(o => o.customer == 2)
    //.join('inner', (o,c) => o.customerId = c.id)
    //.merge('upsert', c => c.id, pc => pc.id)
    //.merge('delete', c => c.id, s => s.id)
    //.catch(err => err)
    .execute(o => o) /*
    .test('merge', c => c, data =>  
        data.find(row => row.id == 2).fullname == 'Johnathan Doe' && 
        data.filter(row => row.id == 4 || row.id == 5).length == 0,
        err => err
    ) */

    console.log(result);


/*
    fetch('getMongo')
    .then(response => response.json())
    .then(json => console.log(JSON.stringify(json)))
    .catch(e => console.log({e}));
*/

</script>

