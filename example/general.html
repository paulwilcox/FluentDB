<body>

    <div id='deferable'></div>
    <div id='extender'></div>

<script type="module">

    // demonstrating deferable

        import { deferable } from '../src/deferable.js';

        let p = Promise.resolve('x')
            .then(x => { 
                x = x + 'a'; 
                console.log(x); 
                return x;
            });

        let sf = new deferable('x')
            .then(x => {
                x = x + 'b';
                console.log(x);
                return x;
            })
            .execute(false);

        let st = new deferable('x')
            .then(x => {
                x = x + 'c';
                console.log(x);
                return x;
            })
            .execute(true);

        console.log({p, sf, st});

    // demonstrating extender

        import { extender } from '../src/extender.js';

        // class we're going to want to test our extender on
        class test {
            constructor() {
                this.x = 'instance val';
            }
            doIt (message) {
                console.log(`logged: ${message}`);
                return 'original';
            }
        }

        // extends test.prototype.doIt()
        // (you could also just extend the instance below if desired)
        // Pass true as second param to prepend or append and the result of the
        // passed in function will be the return value of the extended function.
        // Otherwise the function will retain its original return value.
        new extender(
            test.prototype, 
            'doIt'
        )
        .prepend( function () { console.log(`prepended: ${this.x}`); return 'prepended'; } )
        .append( function () { console.log(`appended: ${this.x}`); return 'appended'; }, true ) 
        .execute();

        // See if the prepended and appended code runs
        let tval = new test().doIt('log this');
        console.log(`returned: ${tval}`);


</script>
</body>