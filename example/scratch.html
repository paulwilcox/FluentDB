<script type='module'>

    import { sampleIdb, sampleDataSets } from './data.js';
    import { oneQuery } from '../src/oneQuery.js';

    let db = 
        new oneQuery()
        .addSources({
            sam: oneQuery.idb('sampleIdb'),
            c: sam => 'customers',
            //c: sampleDataSets.customers,
            o: sampleDataSets.orders
        })
        .filter(c => true)
        .map(c => ({ id: c.id, fullname: `name: ${c.fullname}`}))
        .join('oc', 'inner', (o,c) => o.customer == c.id)
        //.group(oc => oc.id)
        //.sort(oc => oc.rating)
        .fold(oc => {
            rating: oneQuery.sum2(oc.rating + 5)
        })
        .execute();

    console.log({db});


</script>