<div id='printResult'></div>

<script type='module'>

    import { sampleIdb, sampleDataSets } from './data.js';
    import { oneQuery } from '../src/oneQuery.js';

/* TODO:    .join should work inside groupings
            version of .print but for external database
            ressurect .merge
*/

    let db = 
        new oneQuery()
        .addSources({
            sam: oneQuery.idb('sampleIdb'),
            c: sam => 'customers',
            //c: sampleDataSets.customers,
            o: sampleDataSets.orders
        })
        .filter(c => true)
        .map(c => ({ id: c.id, fullname: `name: ${c.fullname}`}))
        //.join('oc', 'inner', (o,c) => o.customer == c.id)
        //.group(oc => oc.id)
        //.sort(oc => oc.rating)
        /*.fold(oc => ({
            rating: oneQuery.sum(oc.rating + 5)
        }))*/
        //.print(c => c, '#printResult', 'c')
        //.print(o => o, '#printResult', 'o')
        //.print(oc => oc, '#printResult', 'oc')
        .execute();

    console.log(db);


</script>