<div id="target"></div>

<script type='module'>

import { sample } from '../dist/FluentDB.sample.client.js';
import $$ from '../dist/FluentDB.client.next.js';

    let joined = 
        $$({
            o: sample.orders,
            p: sample.products,
            c: sample.customers
        })
        .join('op', 'inner', (o,p) => o.product == p.id)
        .join('opc', 'left', (op,c) => op.customer == c.id, 'loop')
        .execute(opc => ({
            customerName: opc.fullname,
            productPrice: opc.price,
            orderRating: opc.rating
        }));

    console.log(joined);

</script>